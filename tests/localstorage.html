<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Joint test</title>
  </head>
  <body>
    <test-empty></test-empty>
    <test-empty-2></test-empty-2>
    <script type="text/javascript">
      localStorage.clear();
    </script>
    <script type="module">
      import { DitoElement } from "../../root.js";
      import { Dito } from "../../main.js";
      const tests = {};
      const success = 'SUCCESS';
      const failure = 'FAILURE';
      const container = new Dito({
        url: 'http://dito.local/tests/components/'
      });
      container.register('test-empty', 1);
      await container.load();
      tests['Empty saved in localStorage'] = localStorage.getItem('test-empty') ? success : failure;

      container.localStorage = false;
      container.register('test-empty-2', 1);
      await container.load();
      tests['Empty 2 is not saved in localStorage'] = localStorage.getItem('test-empty-2') ? failure : success;

      container.localStorage = true;
      container.register('test-empty-3', 1, '', true);
      await container.load();
      tests['Empty 3 saved in localStorage with force'] = localStorage.getItem('test-empty-3') ? success : failure;

      console.table(tests);
    </script>
  </body>
</html>
